<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tasks &mdash; Parthenon  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How to add tests to Parthenon" href="tests.html" />
    <link rel="prev" title="How to Use Sphinx for Writing Docs" href="sphinx-doc.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Parthenon
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="amr.html">Adaptive Mesh Refinement</a></li>
<li class="toctree-l1"><a class="reference internal" href="boundary_communication.html">Boundary communication-in-one concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="boundary_communication.html#sparse-boundary-communication">Sparse boundary communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="boundary_conditions.html">Boundary Conditions</a></li>
<li class="toctree-l1"><a class="reference internal" href="building.html">Building Parthenon</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts_lite.html">C++11 Style Concepts Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="constants.html">Parthenon Built-in Physical Constants</a></li>
<li class="toctree-l1"><a class="reference internal" href="coordinates.html">Coordinates</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Parthenon developer guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="driver.html">Application Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="inputs.html">Input Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="instrumentation.html">Performance Instrumentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="integrators.html">Integrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="load_balancing.html">Load Balancing</a></li>
<li class="toctree-l1"><a class="reference internal" href="nested_par_for.html">Nested Parallelism</a></li>
<li class="toctree-l1"><a class="reference internal" href="outputs.html">Outputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="parthenon_arrays.html">Parthenon Set-Dimensional Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="parthenon_arrays.html#parthenon-arbitrary-dimensional-arrays">Parthenon Arbitrary-Dimensional Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="parthenon_manager.html">Parthenon Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="particles.html">Particles</a></li>
<li class="toctree-l1"><a class="reference internal" href="reductions.html">Task-based reductions</a></li>
<li class="toctree-l1"><a class="reference internal" href="solvers.html">Solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="sphinx-doc.html">How to Use Sphinx for Writing Docs</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tasks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#task">Task</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tasklist">TaskList</a></li>
<li class="toctree-l2"><a class="reference internal" href="#taskregion">TaskRegion</a></li>
<li class="toctree-l2"><a class="reference internal" href="#taskcollection">TaskCollection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#taskqualifier">TaskQualifier</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">How to add tests to Parthenon</a></li>
<li class="toctree-l1"><a class="reference internal" href="weak_scaling.html">Running a Weak Scaling Test in Parthenon</a></li>
<li class="toctree-l1"><a class="reference internal" href="interface/boundary.html">Boundary related classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="interface/containers.html">Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="interface/metadata.html">Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="interface/refinement_operations.html">Prolongation and Restriction Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="interface/sparse.html">Sparse implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="interface/state.html">State Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="mesh/domain.html">Domain</a></li>
<li class="toctree-l1"><a class="reference internal" href="mesh/mesh.html">Mesh</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Parthenon</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Tasks</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/src/tasks.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tasks">
<span id="id1"></span><h1>Tasks<a class="headerlink" href="#tasks" title="Link to this heading"></a></h1>
<p>Parthenon’s tasking infrastructure is how downstream applications describe
and execute their work.  Tasks are organized into a hierarchy of objects.
<code class="docutils literal notranslate"><span class="pre">TaskCollection</span></code>s have one or more <code class="docutils literal notranslate"><span class="pre">TaskRegion</span></code>s, <code class="docutils literal notranslate"><span class="pre">TaskRegion</span></code>s have
one or more <code class="docutils literal notranslate"><span class="pre">TaskList</span></code>s, and <code class="docutils literal notranslate"><span class="pre">TaskList</span></code>s can have one or more sublists
(that are themselves <code class="docutils literal notranslate"><span class="pre">TaskList</span></code>s).</p>
<section id="task">
<h2>Task<a class="headerlink" href="#task" title="Link to this heading"></a></h2>
<p>Though downstream codes never have to interact with the <code class="docutils literal notranslate"><span class="pre">Task</span></code> object directly,
it’s useful to describe nonetheless.  A <code class="docutils literal notranslate"><span class="pre">Task</span></code> object is essentially a functor
that stores the necessary data to invoke a downstream code’s functions with
the desired arguments.  Importantly, however, it also stores information that
relates itself to other tasks, namely the tasks that must be complete before
it should execute and the tasks that may be available to run after it completes.
In other words, <code class="docutils literal notranslate"><span class="pre">Task</span></code>s are nodes in a directed (possibly cyclic) graph, and
include the edges that connect to it and emerge from it.</p>
</section>
<section id="tasklist">
<h2>TaskList<a class="headerlink" href="#tasklist" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">TaskList</span></code> class stores a vector of all the tasks and sublists (a nested
<code class="docutils literal notranslate"><span class="pre">TaskList</span></code>) added to it.  Additionally, it stores various bookkeeping
information that facilitate more advanced features described below.  Adding
tasks and sublists are the only way to interact with <code class="docutils literal notranslate"><span class="pre">TaskList</span></code> objects.</p>
<p>The basic call to <code class="docutils literal notranslate"><span class="pre">AddTask</span></code> takes the task’s dependencies, the function to be
executed, and the arguments to the function as its arguments.  <code class="docutils literal notranslate"><span class="pre">AddTask</span></code> returns
a <code class="docutils literal notranslate"><span class="pre">TaskID</span></code> object that can be used in subsequent calls to <code class="docutils literal notranslate"><span class="pre">AddTask</span></code> as a
dependency either on its own or combined with other <code class="docutils literal notranslate"><span class="pre">TaskID``s</span> <span class="pre">via</span> <span class="pre">the</span> <span class="pre">``|</span></code>
operator.  Use of the <code class="docutils literal notranslate"><span class="pre">|</span></code> operator is historical and perhaps a bit misleading as
it really acts as a logical and – that is, all tasks combined with <code class="docutils literal notranslate"><span class="pre">|</span></code> must be
complete before the dependencies are satisfied.  An overload of <code class="docutils literal notranslate"><span class="pre">AddTask</span></code> takes
a <code class="docutils literal notranslate"><span class="pre">TaskQualifier</span></code> object as the first argument which specifies certain special,
non-default behaviors.  These will be described below.  Note that the default
constructor of <code class="docutils literal notranslate"><span class="pre">TaskID</span></code> produces a special object that when passed into
<code class="docutils literal notranslate"><span class="pre">AddTask</span></code> signifies that the task has no dependencies.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">AddSublist</span></code> function adds a nested <code class="docutils literal notranslate"><span class="pre">TaskList</span></code> to the <code class="docutils literal notranslate"><span class="pre">TaskList</span></code> on
which its called.  The principle use case for this is to add iterative cycles
to the graph, allowing one to execute a series of tasks repeatedly until some
criteria are satisfied.  The call takes as arguments the dependencies (via
<code class="docutils literal notranslate"><span class="pre">TaskID``s</span> <span class="pre">combined</span> <span class="pre">with</span> <span class="pre">``|</span></code>) that must be complete before the sublist
exectues and a <code class="docutils literal notranslate"><span class="pre">std::pair&lt;int,</span> <span class="pre">int&gt;</span></code> specifying the minimum
and maximum number of times the sublist should execute.  Passing something like
<code class="docutils literal notranslate"><span class="pre">{min_iters,</span> <span class="pre">max_iters}</span></code> as the second argument should suffice, with <cite>{1, 1}</cite>
leading to a sublist that never cycles.  <code class="docutils literal notranslate"><span class="pre">AddSublist</span></code>
returns a <code class="docutils literal notranslate"><span class="pre">std::pair&lt;TaskList&amp;,</span> <span class="pre">TaskID&gt;</span></code> which is conveniently accessed via
a structured binding, e.g.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">TaskID</span><span class="w"> </span><span class="n">none</span><span class="p">;</span>
<span class="k">auto</span><span class="w"> </span><span class="p">[</span><span class="n">child_list</span><span class="p">,</span><span class="w"> </span><span class="n">child_list_id</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parent_list</span><span class="p">.</span><span class="n">AddSublist</span><span class="p">(</span><span class="n">dependencies</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">});</span>
<span class="k">auto</span><span class="w"> </span><span class="n">task_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">child_list</span><span class="p">.</span><span class="n">AddTask</span><span class="p">(</span><span class="n">none</span><span class="p">,</span><span class="w"> </span><span class="n">SomeFunction</span><span class="p">,</span><span class="w"> </span><span class="n">arg1</span><span class="p">,</span><span class="w"> </span><span class="n">arg2</span><span class="p">);</span>
</pre></div>
</div>
<p>In the above example, passing <code class="docutils literal notranslate"><span class="pre">none</span></code> as the dependency for the task added to
<code class="docutils literal notranslate"><span class="pre">child_list</span></code> does not imply that this task can execute at any time since
<code class="docutils literal notranslate"><span class="pre">child_list</span></code> itself has dependencies that must be satisfied before any of its
tasks can be invoked.</p>
</section>
<section id="taskregion">
<h2>TaskRegion<a class="headerlink" href="#taskregion" title="Link to this heading"></a></h2>
<p>Under the hood, a <code class="docutils literal notranslate"><span class="pre">TaskRegion</span></code> is a directed, possibly cyclic graph.  The graph
is built up incrementally as tasks are added to the <code class="docutils literal notranslate"><span class="pre">TaskList</span></code>s within the
<code class="docutils literal notranslate"><span class="pre">TaskRegion</span></code>, and it’s construction is completed upon the first time it’s
executed.  <code class="docutils literal notranslate"><span class="pre">TaskRegion</span></code>s can have one or more <code class="docutils literal notranslate"><span class="pre">TaskList</span></code>s.  The primary reason
for this is to allow flexibility in how work is broken up into tasks (and
eventually kernels).  A region with many lists will produce many small
tasks/kernels, but may expose more asynchrony (e.g. MPI communication).  A region
with fewer lists will produce more work per kernel (which may be good for GPUs,
for example), but may limit asynchrony.  Typically, each list is tied to a unique
partition of the mesh blocks owned by a rank.  <code class="docutils literal notranslate"><span class="pre">TaskRegion</span></code> only provides a few
public facing functions:
- <code class="docutils literal notranslate"><span class="pre">TaskListStatus</span> <span class="pre">Execute(ThreadPool</span> <span class="pre">&amp;pool)</span></code>: <code class="docutils literal notranslate"><span class="pre">TaskRegion</span></code>s can be executed, requiring a
<code class="docutils literal notranslate"><span class="pre">ThreadPool</span></code> be provided by the caller.  In practice, <code class="docutils literal notranslate"><span class="pre">Execute</span></code> is usually
called from the <code class="docutils literal notranslate"><span class="pre">Execute</span></code> member function of <code class="docutils literal notranslate"><span class="pre">TaskCollection</span></code>.
- <code class="docutils literal notranslate"><span class="pre">TaskList&amp;</span> <span class="pre">operator[](const</span> <span class="pre">int</span> <span class="pre">i)</span></code>: return a reference to the <code class="docutils literal notranslate"><span class="pre">i</span></code>th
<code class="docutils literal notranslate"><span class="pre">TaskList</span></code> in the region.
- <code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">size()</span></code>: return the number of <code class="docutils literal notranslate"><span class="pre">TaskList</span></code>s in the region.</p>
</section>
<section id="taskcollection">
<h2>TaskCollection<a class="headerlink" href="#taskcollection" title="Link to this heading"></a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">TaskCollection</span></code> contains a
<code class="docutils literal notranslate"><span class="pre">std::vector&lt;TaskRegion&gt;</span></code>, i.e. an ordered list of <code class="docutils literal notranslate"><span class="pre">TaskRegion</span></code>s.
Importantly, each <code class="docutils literal notranslate"><span class="pre">TaskRegion</span></code> will be executed to completion before
subsequent <code class="docutils literal notranslate"><span class="pre">TaskRegion</span></code>s, introducing a notion of sequential
execution and enabling flexibility in task granularity. For example, the
following code fragment uses the <code class="docutils literal notranslate"><span class="pre">TaskCollection</span></code> and <code class="docutils literal notranslate"><span class="pre">TaskRegion</span></code>
abstractions to express work that can be done asynchronously across
blocks, followed by a bulk synchronous task involving all blocks, and
finally another round of asynchronous work.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">TaskCollection</span><span class="w"> </span><span class="n">tc</span><span class="p">;</span>
<span class="n">TaskRegion</span><span class="w"> </span><span class="o">&amp;</span><span class="n">tr1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tc</span><span class="p">.</span><span class="n">AddRegion</span><span class="p">(</span><span class="n">nmb</span><span class="p">);</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">nmb</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">task_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tr1</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">AddTask</span><span class="p">(</span><span class="n">dep</span><span class="p">,</span><span class="w"> </span><span class="n">foo</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">,</span><span class="w"> </span><span class="n">blocks</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="p">}</span>

<span class="p">{</span>
<span class="w">  </span><span class="n">TaskRegion</span><span class="w"> </span><span class="o">&amp;</span><span class="n">tr2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tc</span><span class="p">.</span><span class="n">AddRegion</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">sync_task</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tr2</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">AddTask</span><span class="p">(</span><span class="n">dep</span><span class="p">,</span><span class="w"> </span><span class="n">bar</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">,</span><span class="w"> </span><span class="n">blocks</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">TaskRegion</span><span class="w"> </span><span class="o">&amp;</span><span class="n">tr3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tc</span><span class="p">.</span><span class="n">AddRegion</span><span class="p">(</span><span class="n">nmb</span><span class="p">);</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">nmb</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">task_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tr3</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">AddTask</span><span class="p">(</span><span class="n">dep</span><span class="p">,</span><span class="w"> </span><span class="n">foo</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">,</span><span class="w"> </span><span class="n">blocks</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A diagram illustrating the relationship between these different classes
is shown below.</p>
<figure class="align-default">
<img alt="Task Diagram" src="../_images/TaskDiagram.png" />
</figure>
<p><code class="docutils literal notranslate"><span class="pre">TaskCollection</span></code> provides a few
public-facing functions:
- <code class="docutils literal notranslate"><span class="pre">TaskRegion&amp;</span> <span class="pre">AddRegion(const</span> <span class="pre">int</span> <span class="pre">num_lists)</span></code>: Add and return a reference to
a new <code class="docutils literal notranslate"><span class="pre">TaskRegion</span></code> with the specified number of <code class="docutils literal notranslate"><span class="pre">TaskList``s.</span>
<span class="pre">-</span> <span class="pre">``TaskListStatus</span> <span class="pre">Execute(ThreadPool</span> <span class="pre">&amp;pool)</span></code>: Execute all regions in the
collection.  Regions are executed completely, in the order they were added,
before moving on to the next region.  Task execution will take advantage of
the provided <code class="docutils literal notranslate"><span class="pre">ThreadPool</span></code> to (possibly) execute tasks across <code class="docutils literal notranslate"><span class="pre">TaskList``s</span>
<span class="pre">in</span> <span class="pre">each</span> <span class="pre">region</span> <span class="pre">concurrently.</span>
<span class="pre">-</span> <span class="pre">``TaskListStatus</span> <span class="pre">Execute()</span></code>: Same as above, but execution will use an
internally generated <code class="docutils literal notranslate"><span class="pre">ThreadPool</span></code> with a single thread.</p>
<p>NOTE: Work remains to make the rest of
Parthenon thread-safe, so it is currently required to use a <code class="docutils literal notranslate"><span class="pre">ThreadPool</span></code>
with one thread.</p>
</section>
<section id="taskqualifier">
<h2>TaskQualifier<a class="headerlink" href="#taskqualifier" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">TaskQualifier</span></code> s provide a mechanism for downstream codes to alter the default
behavior of specific tasks in certain ways.  The qualifiers are described below:
- <code class="docutils literal notranslate"><span class="pre">TaskQualifier::local_sync</span></code> : Tasks marked with <code class="docutils literal notranslate"><span class="pre">local_sync</span></code> synchronize across
lists in a region on a given MPI rank.  Tasks that depend on a <code class="docutils literal notranslate"><span class="pre">local_sync</span></code>
marked task gain dependencies from the corresponding task on all lists within
a region.  A typical use for this qualifier is to do a rank-local reduction, for
example before initiating a global MPI reduction (which should be done only once
per rank, not once per <code class="docutils literal notranslate"><span class="pre">TaskList</span></code>).  Note that Parthenon links tasks across
lists in the order they are added to each list, i.e. the <code class="docutils literal notranslate"><span class="pre">n``th</span> <span class="pre">``local_sync</span></code> task
in a list is assumed to be associated with the <code class="docutils literal notranslate"><span class="pre">n``th</span> <span class="pre">``local_sync</span></code> task in all
lists in the region.
- <code class="docutils literal notranslate"><span class="pre">TaskQualifier::global_sync</span></code> : Tasks marked with <code class="docutils literal notranslate"><span class="pre">global_sync</span></code> implicitly have
the same semantics as <code class="docutils literal notranslate"><span class="pre">local_sync</span></code>, but additionally do a global reduction on the
<code class="docutils literal notranslate"><span class="pre">TaskStatus</span></code> to determine if/when execution can proceed on to dependent tasks.
- <code class="docutils literal notranslate"><span class="pre">TaskQualifier::completion</span></code> : Tasks marked with <code class="docutils literal notranslate"><span class="pre">completion</span></code> can lead to exiting
execution of the owning <code class="docutils literal notranslate"><span class="pre">TaskList</span></code>.  If these tasks return <code class="docutils literal notranslate"><span class="pre">TaskStatus::complete</span></code>
and the minimum number of iterations of the list have been completed, the remainder
of the task list will be skipped (or the iteration stopped).  Returning
<code class="docutils literal notranslate"><span class="pre">TaskList::iterate</span></code> leads to continued execution/iteration, unless the maximum
number of iterations has been reached.
- <code class="docutils literal notranslate"><span class="pre">TaskQualifier::once_per_region</span></code> : Tasks with the <code class="docutils literal notranslate"><span class="pre">once_per_region</span></code> qualifier
will only execute once (per iteration, if relevant) regardless of the number of
<code class="docutils literal notranslate"><span class="pre">TaskList``s</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">region.</span>&#160; <span class="pre">This</span> <span class="pre">can</span> <span class="pre">be</span> <span class="pre">useful</span> <span class="pre">when,</span> <span class="pre">for</span> <span class="pre">example,</span> <span class="pre">doing</span> <span class="pre">MPI</span>
<span class="pre">reductions,</span> <span class="pre">printing</span> <span class="pre">out</span> <span class="pre">some</span> <span class="pre">rank-wide</span> <span class="pre">state,</span> <span class="pre">or</span> <span class="pre">calling</span> <span class="pre">a</span> <span class="pre">``completion</span></code> task
that depends on some global condition where all lists would evaluate identical code.</p>
<p><code class="docutils literal notranslate"><span class="pre">TaskQualifier</span></code> s can be combined via the <code class="docutils literal notranslate"><span class="pre">|</span></code> operator and all combinations are
supported.  For example, you might mark a task <code class="docutils literal notranslate"><span class="pre">global_sync</span> <span class="pre">|</span> <span class="pre">completion</span> <span class="pre">|</span> <span class="pre">once_per_region</span></code>
if it were a task to determine whether an iteration should continue that depended
on some previously reduced quantity.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="sphinx-doc.html" class="btn btn-neutral float-left" title="How to Use Sphinx for Writing Docs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tests.html" class="btn btn-neutral float-right" title="How to add tests to Parthenon" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, The Parthenon Collaboration and Triad National Security.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: develop
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Branches</dt>
      <dd><a href="tasks.html">develop</a></dd>
      <dd><a href="../../acreyes/div-free-prolong/src/tasks.html">acreyes/div-free-prolong</a></dd>
      <dd><a href="../../acreyes/edge-flux-pack/src/tasks.html">acreyes/edge-flux-pack</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>